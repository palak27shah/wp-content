!function(t){"use strict";t.WS_Form.prototype.set_is_admin=function(){return!1},t.WS_Form.prototype.init=function(){this.data_cache_build(),this.set_globals()},t.WS_Form.prototype.init_after_get_submit=function(t){this.form_build()},t.WS_Form.prototype.set_globals=function(){this.framework_id=t.WS_Form.settings_plugin.framework,this.framework=t.WS_Form.frameworks.types[this.framework_id],this.framework_fields=this.framework.fields.public,this.invalid_feedback_mask_placeholder="",void 0!==t.WS_Form.meta_keys.invalid_feedback&&void 0!==t.WS_Form.meta_keys.invalid_feedback.p&&(this.invalid_feedback_mask_placeholder=t.WS_Form.meta_keys.invalid_feedback.p),this.form_action_custom=this.form_obj.attr("action")!=ws_form_settings.url+"submit";var e=void 0!==this.framework.fields.public.class_form_validated?this.framework.fields.public.class_form_validated:[];if(this.class_validated=e.join(" "),ws_form_settings.wsf_hash&&"object"==typeof ws_form_settings.wsf_hash){for(var a in ws_form_settings.wsf_hash)if(ws_form_settings.wsf_hash.hasOwnProperty(a)){var i=ws_form_settings.wsf_hash[a];void 0!==i.id&&void 0!==i.hash&&void 0!==i.token&&i.id==this.form_id&&this.hash_set(i.hash,i.token,!0)}}else this.hash_set(this.cookie_get("hash",""),!1,!0);this.visual_editor=void 0!==this.form_canvas_obj.attr("data-visual-builder");var r=this;if(this.hash){var o="submit/hash/"+this.hash+"/";this.token&&(o+=this.token+"/"),t.WS_Form.this.api_call(o,"GET",!1,function(t){void 0!==t.data&&(r.submit=t.data),r.init_after_get_submit(!0),r.submit=!1},function(t){r.read_json_populate(),r.init_after_get_submit(!1)})}else this.read_json_populate(),this.init_after_get_submit(!1)},t.WS_Form.prototype.read_json_populate=function(){"undefined"!=typeof wsf_form_json_populate&&void 0!==wsf_form_json_populate[this.form_id]&&(this.submit_auto_populate=wsf_form_json_populate[this.form_id])},t.WS_Form.prototype.error=function(t,e,a){void 0===e&&(e=""),void 0===a&&(a="");var i=this.language(t,e,!1).replace(/%s/g,e);!this.visual_editor&&this.get_object_meta_value(this.form,"submit_show_errors",!0)&&this.action_message(i),window.console&&window.console.error&&console.error(i)},t.WS_Form.prototype.form_render=function(){this.form_timer(),this.form_framework(),this.form_preview(),this.form_tabs(),this.form_navigation(),this.form_validation(),this.form_select_all(),this.form_select_min_max(),this.form_checkbox_min_max(),this.form_character_word_count(),this.form_required(),this.form_inputmask(),this.form_spam_protection(),this.form_bypass_enabled=!0,this.form_bypass(!1),this.form_stat(),this.form_validate_real_time(),this.trigger("rendered")},t.WS_Form.prototype.form_timer=function(){this.date_start=this.cookie_get("date_start",!1),(!1===this.date_start||isNaN(this.date_start)||""==this.date_start)&&(this.date_start=(new Date).getTime(),this.cookie_set("date_start",this.date_start,!1))},t.WS_Form.prototype.trigger=function(e){var a="wsf-"+e;t(document).trigger(a,[this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj]);var i="wsf-"+e+"-instance-"+this.form_instance_id;t(window).trigger(i);var r="wsf-"+e+"-form-"+this.form_id;t(window).trigger(r)},t.WS_Form.prototype.form_framework=function(){if(void 0!==this.framework.form.public&&"object"==typeof this.framework.form.public.attributes)for(var e in this.framework.form.public.attributes){var a=this.framework.form.public.attributes[e];this.form_obj.attr(e,a)}if(void 0!==this.framework.init_js){var i={form_canvas_selector:"#"+this.form_obj_id},r=this.mask_parse(this.framework.init_js,i);try{t.globalEval("(function($) { "+r+" })(jQuery);")}catch(t){this.error("error_js",action_javascript)}}},t.WS_Form.prototype.form_reset=function(t){this.trigger("reset-before"),this.form_obj.removeClass(this.class_validated),this.form_obj[0].reset(),this.trigger("reset-complete")},t.WS_Form.prototype.form_clear=function(){var e=this;for(var a in this.trigger("clear-before"),this.form_obj.removeClass(this.class_validated),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(a)){var i=this.field_data_cache[a],r=i.id,o=this.field_name_prefix+r,s=t.WS_Form.field_type_cache[i.type],_=void 0!==s.trigger?s.trigger:"change";switch(i.type){case"checkbox":case"price_checkbox":case"radio":case"price_radio":t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){t(this).is(":checked")&&t(this).prop("checked",!1).trigger(_)});break;case"select":case"price_select":t('[name="'+o+'"], [name^="'+o+'["] option',this.form_canvas_obj).each(function(){t(this).is(":selected")&&(t(this).prop("selected",!1),t(this).closest("select").trigger(_))});break;case"textarea":t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&(t(this).val("").trigger(_),e.textarea_set_value(t(this),""))});break;case"color":t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&(t(this).val("").trigger(_),t(this).hasClass("minicolors-input")&&t(this).minicolors("value",""))});break;default:t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&t(this).val("").trigger(_)})}}this.trigger("clear-complete")},t.WS_Form.prototype.form_reload=function(){var e=this;""!=this.hash?t.WS_Form.this.api_call("submit/hash/"+this.hash,"GET",!1,function(t){e.submit=t.data,e.form_reload_after_get_submit(!0),e.submit=!1},function(t){e.form_reload_after_get_submit(!1)}):(this.submit=!1,this.form_reload_after_get_submit(!1))},t.WS_Form.prototype.form_reload_after_get_submit=function(e){t('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),this.form_canvas_obj.show(),this.form_canvas_obj.removeClass(this.class_validated),this.form_validation_real_time_hooks=[],this.form_canvas_obj.empty(),this.form_build()},t.WS_Form.prototype.form_hash_clear=function(){this.hash="",this.cookie_clear("hash")},t.WS_Form.prototype.form_navigation=function(){var e=this,a=t(".wsf-group-tabs",this.form_canvas_obj).children(":not([data-wsf-group-hidden])").length;t('[data-action="wsf-tab_next"]',this.form_canvas_obj).each(function(){t(this).off("click");var i=t(this).closest("[data-group-index]").nextAll(":not([data-wsf-group-hidden])").first();a<=1||!i.length?t(this).attr("disabled","").attr("data-wsf-disabled",""):void 0!==t(this).attr("data-wsf-disabled")&&t(this).removeAttr("disabled").removeAttr("data-wsf-disabled"),void 0===t(this).attr("disabled")&&t(this).on("click",function(){e.group_index_new(t(this),i.attr("data-group-index"))})}),t('[data-action="wsf-tab_previous"]',this.form_canvas_obj).each(function(){t(this).off("click");var i=t(this).closest("[data-group-index]").prevAll(":not([data-wsf-group-hidden])").first();a<=1||!i.length?t(this).attr("disabled","").attr("data-wsf-disabled",""):void 0!==t(this).attr("data-wsf-disabled")&&t(this).removeAttr("disabled").removeAttr("data-wsf-disabled"),void 0===t(this).attr("disabled")&&t(this).on("click",function(){e.group_index_new(t(this),i.attr("data-group-index"))})}),this.form_canvas_obj.off("click",'[data-action="wsf-save"]').on("click",'[data-action="wsf-save"]',function(){var a=t(this).closest("[data-id]").attr("data-id");if(void 0!==e.field_data_cache[a]){var i=e.field_data_cache[a];e.get_object_meta_value(i,"validate_form","")?e.form_post_if_validated("save"):e.form_post("save")}}),this.form_canvas_obj.off("click",'[data-action="wsf-reset"]').on("click",'[data-action="wsf-reset"]',function(t){t.preventDefault(),e.form_reset()}),this.form_canvas_obj.off("click",'[data-action="wsf-clear"]').on("click",'[data-action="wsf-clear"]',function(){e.form_clear()})},t.WS_Form.prototype.group_index_new=function(e,a){this.group_index_set(a);var i=e.closest("[data-id]").attr("data-id"),r=this.field_data_cache[i],o=this.get_object_meta_value(r,"scroll_to_top",""),s=this.get_object_meta_value(r,"scroll_to_top_offset","0");s=""==s?0:parseInt(s,10);var _=this.form_canvas_obj.offset().top-s;switch(o){case"instant":t("html,body").scrollTop(_);break;case"smooth":var n=this.get_object_meta_value(r,"scroll_to_top_duration","0");n=""==n?0:parseInt(n,10),t("html,body").animate({scrollTop:_},n)}},t.WS_Form.prototype.group_index_set=function(e){if(this.form.groups.length<=1)return!1;var a=this.framework.tabs.public;if(void 0!==a.activate_js){var i=a.activate_js;if(""!=i){var r={form:"#"+this.form_obj_id,index:e},o=this.mask_parse(i,r);t.globalEval("(function($) { $(function() {"+o+"}); })(jQuery);"),this.cookie_set("tab_index",e)}}},t.WS_Form.prototype.get_group_index=function(e){if(t(".wsf-tabs",this.form_canvas_obj).children(":visible").length<=1)return!1;var a=e.closest("[data-group-index]");if(0==a.length)return!1;var i=a.first().attr("data-group-index");return null!=i&&parseInt(i,10)},t.WS_Form.prototype.get_section_id=function(t){var e=t.closest('[id^="'+this.form_id_prefix+'section-"]').attr("data-id");return!!e&&parseInt(e,10)},t.WS_Form.prototype.get_field_id_from_obj=function(t){var e=t.closest("[data-type]").attr("data-id");return!!e&&parseInt(e,10)},t.WS_Form.prototype.form_preview=function(){this.form_canvas_obj[0].hasAttribute("data-preview")&&this.form_add_hidden_input("wsf_preview","true")},t.WS_Form.prototype.form_spam_protection=function(){if(this.get_object_meta_value(this.form,"honeypot",!1)){var e=""!=this.form.published_checksum?this.form.published_checksum:"honeypot_unpublished_"+this.form_id,a=t.WS_Form.settings_plugin.framework,i=(t.WS_Form.frameworks.types[a],this.framework.fields.public),r=void 0!==i.honeypot_attributes?" "+i.honeypot_attributes.join(" "):"";this.form_add_hidden_input("field_"+e,"",!1,'autocomplete="off"'+r),t('[name="field_'+e+'"]',this.form_canvas_obj).css({position:"absolute",left:"-9999em"})}},t.WS_Form.prototype.form_required=function(){var e=this;if(!this.get_object_meta_value(this.form,"label_required",!1))return!1;if(""==(a=this.get_object_meta_value(this.form,"label_mask_required","",!0,!0))){var a,i=t.WS_Form.settings_plugin.framework,r=(t.WS_Form.frameworks.types[i],this.framework.fields.public);if(void 0===r.mask_required_label)return!1;if(""==(a=r.mask_required_label))return!1}t("label",this.form_canvas_obj).each(function(){var i=t(this).attr("for");if(void 0!==i){var r=t('[id="'+i+'"]',e.form_canvas_obj);if(r.length&&void 0===r.attr("data-init-required")){var o=void 0!==r.attr("data-required"),s=t(this).attr("data-label-required-id");if(void 0!==s&&!1!==s)var _=t("#"+s,e.form_canvas_obj);else _=t(this);var n=t(".wsf-required-wrapper",_);if(!n.length&&o){var d=_.children("div,[name]").first();d.length?d.before('<span class="wsf-required-wrapper"></span>'):_.append('<span class="wsf-required-wrapper"></span>'),n=t(".wsf-required-wrapper",_)}o?(n.html(a),r.attr("data-init-required","")):(n.html(""),r.removeAttr("data-init-required"))}}})},t.WS_Form.prototype.form_bypass=function(e){if(this.form_bypass_enabled){var a=this,i=t([]),r={required:{bypass:"data-required-bypass",not:'[type="hidden"]'},"aria-required":{bypass:"data-aria-required-bypass",not:'[type="hidden"]'},min:{bypass:"data-min-bypass",not:'[type="hidden"],[type="range"]'},max:{bypass:"data-max-bypass",not:'[type="hidden"],[type="range"]'},minlength:{bypass:"data-minlength-bypass",not:'[type="hidden"]'},maxlength:{bypass:"data-maxlength-bypass",not:'[type="hidden"]'},pattern:{bypass:"data-pattern-bypass",not:'[type="hidden"]'},step:{bypass:"data-step-bypass",not:'[type="hidden"],[type="range"]',replace:"any"}};for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],_=s.bypass,n=s.not,d=void 0!==s.replace&&s.replace;t("["+_+"-group]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'group-"]:not([data-wsf-group-hidden]) ['+_+"-group]:not("+n+")",this.form_canvas_obj).attr(o,function(){return t(this).attr(_+"-group")}).removeAttr(_+"-group"),t("["+o+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'group-"][data-wsf-group-hidden] ['+o+"]:not("+n+'), [id^="'+this.form_id_prefix+'group-"][data-wsf-group-hidden] ['+o+"]:not("+n+")").attr(_+"-group",function(){var e=t(this).attr(o);return d?t(this).attr(o,d):t(this).removeAttr(o),e}),t("["+_+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'group-"][data-wsf-group-hidden] ['+_+"]:not("+n+'), [id^="'+this.form_id_prefix+'group-"][data-wsf-group-hidden] ['+_+"]:not("+n+")").attr(_+"-group",function(){return t(this).attr(_)}).removeAttr(_),t("["+_+"-section]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"] ['+_+"-section]:not("+n+")",this.form_canvas_obj).attr(o,function(){return t(this).attr(_+"-section")}).removeAttr(_+"-section"),t("["+o+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] ['+o+"]:not("+n+'), [id^="'+this.form_id_prefix+'section-"][style="display: none;"] ['+o+"]:not("+n+")").attr(_+"-section",function(){var e=t(this).attr(o);return d?t(this).attr(o,d):t(this).removeAttr(o),e}),t("["+_+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] ['+_+"]:not("+n+'), [id^="'+this.form_id_prefix+'section-"][style="display: none;"] ['+_+"]:not("+n+")").attr(_+"-section",function(){return t(this).attr(_)}).removeAttr(_),t("["+_+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"] ['+_+"]:not("+n+")",this.form_canvas_obj).attr(o,function(){return t(this).attr(_)}).removeAttr(_),t("["+o+"]",this.form_canvas_obj).length&&t('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"] ['+o+"]:not("+n+'), [id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"] ['+o+"]:not("+n+")",this.form_canvas_obj).attr(_,function(){var e=t(this).attr(o);return d?t(this).attr(o,d):t(this).removeAttr(o),e})}t('[id^="'+this.form_id_prefix+'group-"]:not([data-wsf-group-hidden])',this.form_canvas_obj).find('[name]:not([type="hidden"]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id");void 0!==a.validation_message_cache[e]&&t(this)[0].willValidate&&t(this)[0].setCustomValidity(a.validation_message_cache[e]),void 0===t(this).attr("data-hidden-bypass")&&t(this).removeAttr("data-hidden-group")}),t('[id^="'+this.form_id_prefix+'group-"][data-wsf-group-hidden]').find('[name]:not([type="hidden"]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id"),r=t(this)[0].validationMessage;""!==r&&(a.validation_message_cache[e]=r,i.push(t(this))),void 0===t(this).attr("data-hidden-bypass")&&t(this).attr("data-hidden-group","")}),t('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"]',this.form_canvas_obj).find('[name]:not([type="hidden"],[data-hidden-group]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id");void 0!==a.validation_message_cache[e]&&t(this)[0].willValidate&&t(this)[0].setCustomValidity(a.validation_message_cache[e]),void 0===t(this).attr("data-hidden-bypass")&&t(this).removeAttr("data-hidden-section")}),t('[id^="'+this.form_id_prefix+'section-"][style="display:none;"], [id^="'+this.form_id_prefix+'section-"][style="display: none;"]').find('[name]:not([type="hidden"]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id"),r=t(this)[0].validationMessage;""!==r&&(a.validation_message_cache[e]=r,i.push(t(this))),void 0===t(this).attr("data-hidden-bypass")&&t(this).attr("data-hidden-section","")}),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"]',this.form_canvas_obj).find('[name]:not([type="hidden"],[data-hidden-section],[data-hidden-group]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id");void 0!==a.validation_message_cache[e]&&t(this)[0].willValidate&&t(this)[0].setCustomValidity(a.validation_message_cache[e]),void 0===t(this).attr("data-hidden-bypass")&&t(this).removeAttr("data-hidden")}),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"], [id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"]',this.form_canvas_obj).find('[name]:not([type="hidden"]),[data-static]').each(function(){var e=t(this).closest("[data-id]").attr("data-id"),r=t(this)[0].validationMessage;""!==r&&(a.validation_message_cache[e]=r,i.push(t(this))),void 0===t(this).attr("data-hidden-bypass")&&t(this).attr("data-hidden","")}),i.each(function(){t(this)[0].willValidate&&t(this)[0].setCustomValidity("")})}},t.WS_Form.prototype.form_select_all=function(){var e=this;t("[data-select-all]:not([data-init-select-all])",this.form_canvas_obj).each(function(){t(this).attr("data-init-select-all","");var a=t(this).attr("name");t(this).removeAttr("name").removeAttr("value").attr("data-select-all",a),t(this).on("click",function(){var a=t(this).is(":checked"),i=t(this).attr("data-select-all");t('[name="'+i+'"]:enabled',e.form_canvas_obj).each(function(){t(this).prop("checked",a).trigger("change")})})})},t.WS_Form.prototype.form_inputmask=function(){t("[data-inputmask]",this.form_canvas_obj).each(function(){void 0!==t(this).inputmask&&t(this).inputmask().off("invalid")})},t.WS_Form.prototype.form_checkbox_min_max=function(){var e=this;t("[data-checkbox-min]:not([data-checkbox-min-max-init]),[data-checkbox-max]:not([data-checkbox-min-max-init])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-checkbox-min"),i=t(this).attr("data-checkbox-max");if(void 0!==a||void 0!==i){var r=t(this).attr("data-id"),o=t(this).attr("data-repeatable-index"),s=void 0!==o?"-repeat-"+o:"",_=t("#"+e.form_id_prefix+"invalid-feedback-"+r+s,e.form_canvas_obj),n=t('<input type="number" id="'+e.form_id_prefix+"checkbox-min-max-"+r+s+'" data-checkbox-min-max data-progress-include="change" style="display:none !important;" />',e.form_canvas_obj);void 0!==a&&n.attr("min",a),void 0!==i&&n.attr("max",i),i=parseInt(i,10);var d=t('input[type="checkbox"]:not([data-select-all]):checked',t(this)).length;n.attr("value",d),_.before(n),t('input[type="checkbox"]:not([data-select-all])',t(this)).on("change",function(a){var i=t(this).closest("[data-type]"),r=i.attr("data-id"),o=i.attr("data-repeatable-index"),s=void 0!==o?"-repeat-"+o:"",_=t("#"+e.form_id_prefix+"checkbox-min-max-"+r+s,e.form_canvas_obj),n=t('input[type="checkbox"]:not([data-select-all]):checked',i).length,d=t(this).closest("[data-type]"),c=t('input[type="number"]',d),h=e.get_number(c.attr("max"),0,!1);h>0&&n>h&&(t(this).prop("checked",!1),n--),_.val(n).trigger("change")}),t(this).attr("data-checkbox-min-max-init","")}})},t.WS_Form.prototype.form_select_min_max=function(){var e=this;t("[data-select-min]:not([data-select-min-max-init]),[data-select-max]:not([data-select-min-max-init])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-select-min"),i=t(this).attr("data-select-max");if(void 0!==a||void 0!==i){var r=t(this).attr("data-id"),o=t(this).attr("data-repeatable-index"),s=void 0!==o?"-repeat-"+o:"",_=t("#"+e.form_id_prefix+"invalid-feedback-"+r+s,e.form_canvas_obj),n=t('<input type="number" id="'+e.form_id_prefix+"select-min-max-"+r+s+'" data-select-min-max data-progress-include="change" style="display:none !important;" />',e.form_canvas_obj);void 0!==a&&n.attr("min",a),void 0!==i&&n.attr("max",i),i=parseInt(i,10);var d=t("select option:selected",t(this)).length;n.attr("value",d),_.before(n),t("select",t(this)).on("change",function(){var a=t(this).closest("[data-type]"),r=a.attr("data-id"),o=a.attr("data-repeatable-index"),s=void 0!==o?"-repeat-"+o:"",_=t("#"+e.form_id_prefix+"select-min-max-"+r+s,e.form_canvas_obj),n=t("select option:selected",a).length;i>0&&n>i&&(t(this).prop("selected",!1),n--),_.val(n).trigger("change")}),t(this).attr("data-select-min-max-init","")}})},t.WS_Form.prototype.form_validation=function(){var t=this;!0===this.form_post_run&&this.form_obj.off(),this.get_object_meta_value(this.form,"submit_on_enter",!1)||this.form_obj.on("keydown",":input:not(textarea)",function(t){if(13==t.keyCode)return t.preventDefault(),!1}),this.form_obj.on("submit",function(e){e.preventDefault(),e.stopPropagation(),t.form_post_if_validated("submit")})},t.WS_Form.prototype.form_post_if_validated=function(t){this.trigger(t+"-before"),this.form_post_locked||(this.has_ecommerce&&this.form_ecommerce_calculate(),this.form_obj.addClass(this.class_validated),this.form_validate(this.form_obj)?(this.trigger(t+"-validate-success"),this.form_post(t)):this.trigger(t+"-validate-fail"))},t.WS_Form.prototype.form_validate=function(e){void 0===e&&(e=this.form_obj),this.trigger("validate-before");this.form.groups.length;var a=!1,i=!1,r=e[0].checkValidity();if(!r){var o=t(":invalid",e).not("fieldset");o&&(i=o.first(),a=this.get_group_index(i))}return r||(!1!==i&&this.get_object_meta_value(this.form,"invalid_field_focus",!0)&&(!1!==a?this.object_focus=i:i.trigger("focus")),!1!==a&&this.group_index_set(a)),this.trigger("validate-after"),r},t.WS_Form.prototype.form_validate_real_time=function(e){var a=this;for(var i in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(i)){var r=this.field_data_cache[i].type,o=t.WS_Form.field_type_cache[r];if(void 0!==o.events){var s=o.events.event,_=this.field_data_cache[i].id,n=void 0!==o.submit_array&&o.submit_array;t('[data-type][data-id="'+_+'"],input[type="hidden"][data-id-hidden="'+_+'"]',this.form_canvas_obj).each(function(){var e=t(this).attr("data-repeatable-index"),i=void 0!==e?"["+e+"]":"";if(n)var r=t('[name="'+ws_form_settings.field_prefix+_+i+'[]"]:not([data-init-validate-real-time]), [name="'+ws_form_settings.field_prefix+_+i+'[]"]:not([data-init-validate-real-time])',a.form_canvas_obj);else r=t('[name="'+ws_form_settings.field_prefix+_+i+'"]:not([data-init-validate-real-time]), [name="'+ws_form_settings.field_prefix+_+i+'"]:not([data-init-validate-real-time])',a.form_canvas_obj);if(r.length){r.attr("data-init-validate-real-time","");var d=void 0!==o.event_validate_bypass&&o.event_validate_bypass;r.on(s+" blur",function(t){d||a.form_validate_real_time_process(!1)})}})}}this.form_validate_real_time_process(!1)},t.WS_Form.prototype.form_validate_real_time_process=function(t){for(var e in this.form_valid=this.form_validate_silent(this.form_obj),t||this.form_canvas_obj.trigger("wsf-validate-silent"),null!==this.form_valid_old&&this.form_valid_old==this.form_valid||t||this.form_canvas_obj.trigger("wsf-validate"),this.form_valid_old=this.form_valid,this.form_validation_real_time_hooks)if(this.form_validation_real_time_hooks.hasOwnProperty(e)){var a=this.form_validation_real_time_hooks[e];void 0===a?delete this.form_validation_real_time_hooks[e]:a(this.form_valid,this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj)}return this.form_valid},t.WS_Form.prototype.form_validate_real_time_register_hook=function(t){this.form_validation_real_time_hooks.push(t)},t.WS_Form.prototype.form_validate_silent=function(e){var a=e[0];return t(':valid[aria-invalid="true"]:not(fieldset)',e).removeAttr("aria-invalid"),t(':invalid:not([aria-invalid="true"]):not(fieldset)',e).attr("aria-invalid","true"),!!a.checkValidity()},t.WS_Form.prototype.object_validate=function(e){var a=[];if(void 0===e)return!1;var i=this,r=!0;return t("input,select,textarea",e).filter(':not([data-hidden],[data-hidden-section],[data-hidden-group],[disabled],[type="hidden"])').each(function(){var e=t(this).closest("[data-id]").attr("data-id"),o=i.field_data_cache[e].type,s=t(this).closest("[data-type]").attr("data-repeatable-index"),_=void 0!==s?"["+s+"]":"",n=ws_form_settings.field_prefix+e+_,d=!1;switch(o){case"radio":case"price_radio":if(void 0!==a[n])return;d=t(this)[0].checkValidity();break;case"email":d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t(this).val());break;default:d=t(this)[0].checkValidity()}if(a[n]=!0,!d)return r=!1,!1}),r},t.WS_Form.prototype.hex_to_hsl=function(t){var e=this.hex_to_rgb(t);return!1!==e&&this.rgb_to_hsl(e)},t.WS_Form.prototype.hex_to_rgb=function(t){if(""==t)return!1;var e="#"==t[0];if(e&&7!=t.length)return!1;if(!e&&6!=t.length)return!1;t=e?t.substr(1):t;return{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}},t.WS_Form.prototype.rgb_to_hsl=function(t){if(void 0===t.r)return!1;if(void 0===t.g)return!1;if(void 0===t.b)return!1;var e=t.r,a=t.g,i=t.b;e/=255,a/=255,i/=255;var r,o,s=Math.max(e,a,i),_=Math.min(e,a,i),n=(s+_)/2;if(s==_)r=o=0;else{var d=s-_;switch(o=n>.5?d/(2-s-_):d/(s+_),s){case e:r=(a-i)/d+(a<i?6:0);break;case a:r=(i-e)/d+2;break;case i:r=(e-a)/d+4}r/=6}return{h:r,s:o,l:n}},t.WS_Form.prototype.conditional_process_actions=function(e,a,i,r){var o=0,s=!1,_=!1,n=!1,d=this;for(var c in e)if(e.hasOwnProperty(c)){var h=e[c];if(this.conditional_action_check(h)){var l=h.object,f=h.object_id,m=void 0!==h.object_row_id&&h.object_row_id,p=h.action;switch(l){case"form":var u=d.form_obj,v=d.form_obj,b=void 0!==h.value&&this.parse_variables_process(h.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,p,u,v,l,f,m,b,!1);s=s||g.process_required,_=_||g.process_bypass,n=n||g.process_navigation;break;case"group":var w="#"+this.form_id_prefix+"group-"+f;u=v=t(w,this.form_canvas_obj),b=void 0!==h.value&&this.parse_variables_process(h.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,p,u,v,l,f,m,b,!1);s=s||g.process_required,_=_||g.process_bypass,n=n||g.process_navigation;break;case"section":var y=this.get_section_id(i);if(!(j=t('[id^="'+this.form_id_prefix+'section-"][data-id="'+f+'"]',this.form_canvas_obj)).length)break;var k=j.first();y===parseInt(f,10)&&k.attr("data-repeatable-index")&&(j=j.filter('[data-repeatable-index="'+r+'"]')),j.each(function(){var e=void 0!==t(this).attr("data-repeatable-index")&&t(this).attr("data-repeatable-index"),i=void 0!==h.value&&d.parse_variables_process(h.value,e,!1,!1,!1,!1,!1).output,r=d.conditional_process_action(a,p,t(this),t(this),l,f,m,i,e);s=s||r.process_required,_=_||r.process_bypass,n=n||r.process_navigation});break;case"field":var j;y=this.get_section_id(i);if(!(j=t('[id^="'+this.form_id_prefix+'field-wrapper-"][data-id="'+f+'"],input[type="hidden"][data-id-hidden="'+f+'"]',this.form_canvas_obj)).length)break;k=j.first();y===this.get_section_id(k.first())&&k.attr("data-repeatable-index")&&(j=j.filter('[data-repeatable-index="'+r+'"]')),j.each(function(){var e=void 0!==t(this).attr("data-repeatable-index")&&t(this).attr("data-repeatable-index"),i=!1!==e?"-repeat-"+e:"",r="#"+d.form_id_prefix+"field-"+f+(m?"-row-"+m:"")+i,o=t(r,d.form_canvas_obj),c=void 0!==d.field_data_cache[f]&&d.field_data_cache[f],u=void 0!==h.value&&d.parse_variables_process(h.value,e,!1,!1,c,!1,!1).output,v=d.conditional_process_action(a,p,t(this),o,l,f,m,u,e);s=s||v.process_required,_=_||v.process_bypass,n=n||v.process_navigation});break;case"action":b=void 0!==h.value&&d.parse_variables_process(h.value,!1,!1,!1,!1,!1).output,g=d.conditional_process_action(a,p,t(this),!1,l,f,m,b,!1);s=s||g.process_required,_=_||g.process_bypass,n=n||g.process_navigation}o++}}return s&&(this.form_progress(),this.form_required()),_&&(this.form_bypass(!0),this.form_tab_validation_process()),n&&this.form_navigation(),o},t.WS_Form.prototype.conditional_process_action=function(e,a,i,r,o,s,_,n,d){void 0===n&&(n="");var c=ws_form_settings.field_prefix+s+(d?"["+d+"]":""),h=n,l=!1,f=!1,m=!1,p=!1;switch(a){case"value":case"value_number":case"value_datetime":case"value_tel":case"value_email":case"value_textarea":switch(i.attr("data-type")){case"price":case"cart_price":if(""===n&&(n="0"),isNaN(n))n=this.get_number(n);n=this.get_price(n)}r.attr("data-value-old",function(){return t(this).val()}).val(n).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"),"value_textarea"===a&&this.textarea_set_value(r,n);break;case"value_range":case"value_rating":r.attr("data-value-old",function(){return t(this).val()}).val(n).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"value_color":r.hasClass("minicolors-input")?r.attr("data-value-old",function(){return t(this).val()}).minicolors("value",{color:n}).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"):r.attr("data-value-old",function(){return t(this).val()}).val(n).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"html":t("[data-html],[data-text-editor]",i).html(n);break;case"text_editor":if(void 0!==this.field_data_cache[s]){var u=this.field_data_cache[s];if(void 0!==t.WS_Form.field_type_cache[u.type])"text_editor"===(void 0!==($=t.WS_Form.field_type_cache[u.type]).meta_wpautop&&$.meta_wpautop)&&(n=this.wpautop(n))}t("[data-text-editor]",i).html(n);break;case"button_html":r.html(n);break;case"class_add_wrapper":i.addClass(n),l="debug_action_added";break;case"class_remove_wrapper":i.removeClass(n),l="debug_action_removed";break;case"class_add_field":r.addClass(n),l="debug_action_added";break;case"class_remove_field":r.removeClass(n),l="debug_action_removed";break;case"value_row_select":case"value_row_deselect":if(!r.is(":enabled"))break;var v=r.prop("selected")!==("value_row_select"==a);r.prop("selected",!1).prop("selected","value_row_select"==a),v&&r.closest("select").trigger("change"),l="debug_action_"+("value_row_select"==a?"selected":"deselected");break;case"value_row_select_value":case"value_row_deselect_value":v=t('option[value="'+this.html_encode(n)+'"]',r).prop("selected")!==("value_row_select_value"==a);t('option[value="'+this.html_encode(n)+'"]',r).prop("selected","value_row_select_value"==a),v&&r.trigger("change"),l="debug_action_"+("value_row_select"==a?"selected_value":"deselected_value");break;case"value_row_reset":i.find("option:enabled").prop("selected",!0).prop("selected",!1).trigger("change"),l="debug_action_reset";break;case"value_row_check":case"value_row_uncheck":if(!r.is(":enabled"))break;v=r.prop("checked")!==("value_row_check"==a);r.prop("checked","value_row_check"==a),v&&r.trigger("change"),l="debug_action_"+("value_row_check"==a?"checked":"unchecked");break;case"value_row_check_value":case"value_row_uncheck_value":v=t('input[value="'+this.html_encode(n)+'"]',i).prop("checked")!==("value_row_check_value"==a);t('input[value="'+this.html_encode(n)+'"]',i).prop("checked","value_row_check_value"==a),v&&t('input[value="'+this.html_encode(n)+'"]',i).trigger("change"),l="debug_action_"+("value_row_check_value"==a?"checked":"unchecked");break;case"value_row_required":case"value_row_not_required":r.prop("required","value_row_required"==a).removeAttr("data-init-required"),"value_row_required"==a?r.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):r.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),l="debug_action_"+("value_row_required"==a?"required":"not_required"),f=!0,m=!0;break;case"value_row_disabled":case"value_row_not_disabled":r.attr("disabled","value_row_disabled"==a),void 0!==r.parent().attr("data-wsf-select2")&&this.form_select_ajax(r.parent()),l="debug_action_"+("value_row_disabled"==a?"disabled":"enabled");break;case"value_row_visible":case"value_row_not_visible":"value_row_not_visible"===a?r.parent().hide():r.parent().show(),l="debug_action_"+("value_row_not_visible"==a?"hide":"show");break;case"value_row_focus":r.trigger("focus"),l="debug_action_focussed";break;case"value_row_class_add":r.addClass(n),l="debug_action_added";break;case"value_row_class_remove":r.removeClass(n),l="debug_action_removed";break;case"value_row_set_custom_validity":var b=t('[id^="'+this.form_id_prefix+"invalid-feedback-"+s+"-row-"+_+'"]',i);this.set_invalid_feedback(r,b,n,s,_),m=!0;break;case"min":case"max":case"step":n=""!=n&&this.get_float(n,0),this.obj_set_attribute(r,a,n);break;case"min_int":case"max_int":case"step_int":var g=a.replace("_int","");n=""!=n&&this.get_number(n,0,!1),this.obj_set_attribute(r,g,n);break;case"select_min":case"select_max":var w="select_min"===a?"min":"max";n=""!=n&&this.get_number(n,0,!1);var y=void 0===i.attr("data-select-min-max-init");if(!1!==n?i.attr("data-select-"+w,n):i.removeAttr("data-select-"+w),y)this.form_select_min_max();else{var k=t('input[type="number"]',i);this.obj_set_attribute(k,w,n)}break;case"checkbox_min":case"checkbox_max":w="checkbox_min"===a?"min":"max";n=""!=n&&this.get_number(n,0,!1);var j=void 0===i.attr("data-checkbox-min-max-init");if(!1!==n?i.attr("data-checkbox-"+w,n):i.removeAttr("data-checkbox-"+w),j)this.form_checkbox_min_max();else{k=t('input[type="number"]',i);this.obj_set_attribute(k,w,n)}break;case"visibility":switch(o){case"group":var x=t('[href="#'+this.form_id_prefix+"group-"+s+'"]',this.form_canvas_obj).parent();if("off"===n){if(i.is(":visible")){var S=t('[id^="'+this.form_id_prefix+'group-"]:not([data-wsf-group-hidden])');if(S.length){var F=S.first().attr("id");t('[href="#'+F+'"]').trigger("click")}}x.attr("data-wsf-group-hidden","").hide().attr("aria-live","polite").attr("aria-hidden","true"),i.attr("data-wsf-group-hidden","").attr("aria-live","polite").attr("aria-hidden","true"),l="debug_action_hide"}else x.removeAttr("data-wsf-group-hidden").show().removeAttr("aria-hidden"),i.removeAttr("data-wsf-group-hidden").removeAttr("aria-hidden"),l="debug_action_show";m=!0,p=!0;break;case"section":case"field":"off"===n?(i.hide().attr("aria-live","polite").attr("aria-hidden","true"),m=!0,l="debug_action_hide"):(i.show().removeAttr("aria-hidden"),m=!0,"section"==o&&this.signatures_redraw(!1,s),"field"==o&&this.signatures_redraw(!1,!1,s),l="debug_action_show")}break;case"set_row_count":if(!(D=t('[data-repeatable][data-id="'+s+'"]',this.form_canvas_obj)).length)break;var W=D.length;if(isNaN(n))break;var q=parseInt(n,10),A=this.section_data_cache[s],C=this.get_object_meta_value(A,"section_repeat_min",1);(C=""==C||isNaN(C)?1:parseInt(C,10))<1&&(C=1);var I=this.get_object_meta_value(A,"section_repeat_max",!1);if(q<C&&(q=C),!1!==(I=""!=I&&!isNaN(C)&&parseInt(I,10))&&q>I&&(q=I),W<q){for(var O=D.last(),T=q-W,P=0;P<T;P++)this.section_clone(O);this.section_add_init(s),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+s)}if(W>q){for(var V=W-q,N=0;N<V;N++){var D;(D=t('[data-repeatable][data-id="'+s+'"]',this.form_canvas_obj)).last().remove()}this.section_remove_init(s),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+s)}break;case"disabled":switch(o){case"section":i.prop("disabled","on"==n),"on"==n?i.attr("aria-disabled","true"):i.removeAttr("aria-disabled");var M=t("[name]",i);break;case"field":M=r}var E=this;t(M).each(function(){t(this).prop("disabled","on"==n),"on"==n?t(this).attr("aria-disabled","true"):t(this).removeAttr("aria-disabled");var e=t(this).closest("[data-type]"),a=E.get_field_value_fallback(e.attr("data-type"),!1,"class_disabled",!1);switch("on"==n?(!1!==a&&t(this).addClass(a.join(" ")),t(this).css({"pointer-events":"none"}).attr("data-conditional-logic-bypass","")):(!1!==a&&t(this).removeClass(a.join(" ")),t(this).css({"pointer-events":"auto"}).removeAttr("data-conditional-logic-bypass")),e.attr("data-type")){case"file":switch(t(this).attr("data-file-type")){case"dropzonejs":"on"==n?t(".dropzone",e)[0].dropzone.disable():t(".dropzone",e)[0].dropzone.enable()}}}),p=!0,l="debug_action_"+("on"==n?"disabled":"enabled");break;case"required":switch((u=this.field_data_cache[s]).type){case"radio":case"price_radio":r=t('[name="'+c+'[]"]',i)}r.prop("required","on"==n).removeAttr("data-init-required"),"on"==n?r.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):r.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),l="debug_action_"+("on"==n?"required":"not_required"),f=!0,m=!0;break;case"required_signature":r.prop("required","on"==n).removeAttr("data-init-required"),"on"==n?r.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):r.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),l="debug_action_"+("on"==n?"required":"not_required"),f=!0,m=!0;break;case"readonly":r.prop("readonly","on"==n),"on"==n?r.attr("aria-readonly","true"):r.removeAttr("aria-readonly"),l="debug_action_"+("on"==n?"read_only":"not_read_only"),this.form_date();break;case"set_custom_validity":var z=!1;if(void 0!==this.field_data_cache[s]){var $;u=this.field_data_cache[s];if(void 0!==t.WS_Form.field_type_cache[u.type])z=void 0!==($=t.WS_Form.field_type_cache[u.type]).invalid_feedback_last_row&&$.invalid_feedback_last_row}b=t('[id^="'+this.form_id_prefix+"invalid-feedback-"+s+'"]',i);if(z)r=b.siblings('[id^="'+this.form_id_prefix+"field-"+s+'"]');this.set_invalid_feedback(r,b,n,s),m=!0;break;case"click":switch(o){case"group":t('[href="#'+this.form_id_prefix+"group-"+s+'"]').trigger("click");break;case"field":r.trigger("click")}l="debug_action_clicked";break;case"focus":r.trigger("focus"),l="debug_action_focussed";break;case"action_run":-1!==this.conditional_actions_run_action.indexOf(s)&&this.form_post("action",s);break;case"action_run_on_save":-1===this.conditional_actions_run_save.indexOf(s)&&(this.conditional_actions_run_save.push(s),this.conditional_actions_changed=!0);break;case"action_run_on_submit":-1===this.conditional_actions_run_submit.indexOf(s)&&(this.conditional_actions_run_submit.push(s),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_save":-1!==(G=this.conditional_actions_run_save.indexOf(s))&&(this.conditional_actions_run_save.splice(G,1),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_submit":var G;-1!==(G=this.conditional_actions_run_submit.indexOf(s))&&(this.conditional_actions_run_submit.splice(G,1),this.conditional_actions_changed=!0);break;case"javascript":try{t.globalEval("(function($) {"+n+"})(jQuery);")}catch(t){this.error("error_js",n)}break;case"validate_show":this.form_obj.addClass(this.class_validated);break;case"validate_hide":this.form_obj.removeClass(this.class_validated);break;case"form_save":this.form_post("save");break;case"form_save_validate":this.form_post_if_validated("save");break;case"form_submit":this.form_obj.submit();break;case"form_clear":this.form_clear();break;case"form_reset":this.form_reset();break;case"reset":case"clear":var Q="clear"===a;switch(o){case"group":this.group_fields_reset(s,Q);break;case"section":this.section_fields_reset(s,Q,d);break;case"field":this.field_reset(s,Q,i)}}if(t.WS_Form.debug_rendered){var L=!1;switch(o){case"form":L=this.language("debug_action_form");var H=this.language("debug_action_form");break;case"group":if(void 0!==this.group_data_cache[s]){var J=this.group_data_cache[s];L=this.language("debug_action_group"),H=J.label}break;case"section":if(void 0!==this.section_data_cache[s])J=this.section_data_cache[s],L=this.language("debug_action_section"),H=J.label;break;case"field":if(void 0!==this.field_data_cache[s])L=(J=this.field_data_cache[s]).type,H=J.label;break;case"action":if(void 0!==this.action_data_cache[s])J=this.action_data_cache[s],L=this.language("debug_action_action"),H=J.label}if(!1!==L){!1!==l&&(h=this.language(l));var R=t.WS_Form.settings_form.conditional.objects[o].action[a],X=R.text.toUpperCase();void 0!==R.values&&"object"==typeof R.values&&void 0!==R.values[n]&&(h=R.values[n].text);var Z="<strong>["+this.html_encode(H)+"] "+X+(!1!==h&&""!=h?" '"+this.html_encode(h)+"'":"")+"</strong> ("+this.language("debug_action_type")+": "+L+" | ID: "+s+(_?" | "+this.language("debug_action_row")+" ID: "+_:"")+")";this.log("log_conditional_action_"+e,Z,"conditional")}}return{process_required:f,process_bypass:m,process_navigation:p}},t.WS_Form.prototype.obj_set_attribute=function(t,e,a){void 0!==t.attr("data-"+e+"-bypass")?!1!==a?t.attr("data-"+e+"-bypass",a).trigger("change"):t.removeAttr("data-"+e+"-bypass").trigger("change"):!1!==a?t.attr(e,a).trigger("change"):t.removeAttr(e).trigger("change")},t.WS_Form.prototype.group_fields_reset=function(t,e){if(void 0===this.group_data_cache[t])return!1;var a=this.group_data_cache[t];if(void 0===a.sections)return!1;var i=a.sections;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];this.section_fields_reset(o.id,e,!1)}},t.WS_Form.prototype.section_fields_reset=function(e,a,i){if(void 0===this.section_data_cache[e])return!1;var r=this.section_data_cache[e];if(void 0===r.fields)return!1;var o=r.fields;for(var s in o)if(o.hasOwnProperty(s)){var _=o[s],n=_.id;if(!1===i)var d='[id^="'+this.form_id_prefix+"field-wrapper-"+n+'"][data-id="'+_.id+'"]';else d="#"+this.form_id_prefix+"field-wrapper-"+n+"-repeat-"+i;var c=t(d,this.form_canvas_obj);this.field_reset(n,a,c)}},t.WS_Form.prototype.field_reset=function(e,a,i){var r=this;if(void 0===i&&(i=!1),void 0!==this.field_data_cache[e]){var o=this.field_data_cache[e],s=t.WS_Form.field_type_cache[o.type],_=void 0!==s.trigger?s.trigger:"change";switch(o.type){case"select":t("option",i).each(function(){var e=!a&&t(this).prop("defaultSelected"),i=t(this).prop("selected")!==e;t(this).prop("selected",e),i&&t(this).trigger(_)});break;case"checkbox":t('input[type="checkbox"]',i).each(function(){var e=!a&&t(this).prop("defaultChecked"),i=t(this).prop("checked")!==e;t(this).prop("checked",e),i&&t(this).trigger(_)});break;case"radio":t('input[type="radio"]',i).each(function(){var e=!a&&t(this).prop("defaultChecked"),i=t(this).prop("checked")!==e;t(this).prop("checked",e),i&&t(this).trigger(_)});break;case"textarea":t("textarea",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),r.textarea_set_value(t(this),e),i&&t(this).trigger("change")});break;case"color":t("input",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),t(this).hasClass("minicolors-input")&&t(this).minicolors("value",{color:e}),i&&t(this).trigger("change")});break;case"hidden":var n=a?"":i.attr("data-default-value"),d=i.val()!==n;i.val(n),d&&i.trigger(_);break;case"googlemap":t("input",i).each(function(){var e=a?"":t(this).attr("data-default-value"),i=t(this).val()!==e;t(this).val(e),i&&t(this).trigger(_)});break;default:t("input",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),i&&t(this).trigger(_)})}}},t.WS_Form.prototype.conditional_logic_previous=function(t,e,a){switch(a){case"||":t|=e;break;case"&&":t&=e}return t},t.WS_Form.prototype.conditional_condition_check=function(t){return!(null===t||"object"!=typeof t||void 0===t.id||void 0===t.object||void 0===t.object_id||void 0===t.object_row_id||void 0===t.logic||void 0===t.value||void 0===t.case_sensitive||void 0===t.logic_previous||""==t.id||0==t.id||""==t.object||""==t.object_id||""==t.logic)},t.WS_Form.prototype.conditional_action_check=function(t){return!(null===t||"object"!=typeof t||void 0===t.object||void 0===t.object_id||void 0===t.action||""==t.object||""==t.object_id||""==t.action)},t.WS_Form.prototype.form_tabs=function(){if(this.form.groups.length<=1)return!1;var e=this,a=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0,i=t(".wsf-group-tabs",this.form_canvas_obj),r=i.children();if(void 0===r[a]||void 0!==t(r[a]).attr("data-wsf-group-hidden")){a=0;var o=t(":not([data-wsf-group-hidden])",r);o.length&&(a=o.first().index()),e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",a)}t.WS_Form.settings_plugin.framework==ws_form_settings.framework_admin?(i.hasClass("wsf-tabs")&&this.tabs_destroy(),this.tabs(i,{active:a})):this.group_index_set(a);var s=this.framework.tabs.public;if(void 0!==s.event_js){var _=s.event_js,n=void 0!==s.event_type_js&&s.event_type_js,d=void 0!==s.event_selector_wrapper_js&&s.event_selector_wrapper_js,c=void 0!==s.event_selector_active_js&&s.event_selector_active_js;switch(n){case"wrapper":var h=t(d,this.form_canvas_obj);break;default:h=t('[href^="#'+this.form_id_prefix+'group-"]',this.form_canvas_obj)}h.on(_,function(a,i){switch(n){case"wrapper":var r=t(c,h).index();break;default:r=t(this).parent().index()}e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",r),!1!==e.object_focus&&(e.object_focus.trigger("focus"),e.object_focus=!1)})}},t.WS_Form.prototype.form_tab_validation=function(){var t=this;this.get_object_meta_value(this.form,"tab_validation")&&(this.form_canvas_obj.on("wsf-validate-silent",function(){t.form_tab_validation_process()}),this.form_tab_validation_process())},t.WS_Form.prototype.form_tab_validation_process=function(){if(this.get_object_meta_value(this.form,"tab_validation")){var e=this,a=!0,i=t(".wsf-group-tabs > :not([data-wsf-group-hidden]) > a",this.form_canvas_obj),r=i.length,o=0;i.each(function(e){if(t(t(this).attr("href")).is(":visible"))return o=e,!1}),i.each(function(i){if(e.tab_validation_previous(t(this),a),i<r-1){if(!0===a)var s=e.object_validate(t(t(this).attr("href")));else s=!1;e.tab_validation_current(t(this),s),a=s}!s&&o>i&&e.group_index_set(i)}),this.form_navigation()}},t.WS_Form.prototype.tab_validation_current=function(e,a){var i=e.attr("href"),r=t(i,this.form_canvas_obj),o=t('button[data-action="wsf-tab_next"]',r);a?o.removeAttr("disabled"):o.attr("disabled","")},t.WS_Form.prototype.tab_validation_previous=function(t,e){var a=this.framework.tabs.public;void 0!==a.class_disabled&&(e?t.removeClass(a.class_disabled):t.addClass(a.class_disabled)),void 0!==a.class_parent_disabled&&(e?t.parent().removeClass(a.class_parent_disabled):t.parent().addClass(a.class_parent_disabled))},t.WS_Form.prototype.form_post=function(e,a){void 0===e&&(e="save"),void 0===a&&(a=0);var i="submit"==e;this.trigger(e);var r=this;this.form_post_lock(),this.form_add_hidden_input("wsf_form_id",this.form_id),this.form_add_hidden_input("wsf_hash",this.hash),this.form_add_hidden_input(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),"on"==this.get_object_meta_value(this.form,"tracking_duration","on")&&this.form_add_hidden_input("wsf_duration",Math.round(((new Date).getTime()-this.date_start)/1e3)),"submit"==e&&(this.date_start=!1,this.cookie_set("date_start",!1,!1),this.form_timer()),void 0!==ws_form_settings.post_id&&ws_form_settings.post_id>0&&this.form_add_hidden_input("wsf_post_id",ws_form_settings.post_id),this.form_add_hidden_input("wsf_post_mode",e);var o=t("[data-hidden],[data-hidden-section],[data-hidden-group]",r.form_canvas_obj).map(function(){var e;if(void 0===(e=t(this).attr("name"))&&void 0===(e=t(this).attr("data-name")))return"";return e=e.replace("[]","")}).get(),s=(o=o.filter(function(t,e,a){return a.indexOf(t)===e})).join();this.form_add_hidden_input("wsf_hidden",s);var _=t("[data-required-bypass],[data-required-bypass-section],[data-required-bypass-group],[data-conditional-logic-bypass]",this.form_canvas_obj).map(function(){var e=t(this).attr("name");return e=e.replace("[]","")}).get(),n=(_=_.filter(function(t,e,a){return a.indexOf(t)===e})).join();if(this.form_add_hidden_input("wsf_bypass_required",n),0==a&&!1===this.form_ajax)return r.trigger(e+"-complete"),void r.trigger("complete");r.trigger(e+"-before-ajax");var d=new FormData(this.form_obj[0]);a>0&&d.append("wsf_action_id",a),this.api_call("submit","POST",d,function(t){var a=void 0!==t.error_validation&&t.error_validation,o=void 0!==t.data&&void 0!==t.data.errors&&t.data.errors.length,s=void 0===t.data||"save"==e||a||o;if(r.form_post_unlock("progress",!s,s),!i||a||o||(r.form_hash_clear(),r.get_object_meta_value(r.form,"submit_reload",!0)&&r.form_reload()),(o||a)&&(r.trigger(e+"-error"),r.trigger("error")),o&&r.get_object_meta_value(r.form,"submit_show_errors",!0))for(var _ in t.data.errors)if(t.data.errors.hasOwnProperty(_)){var n=t.data.errors[_];r.action_message(n)}return r.trigger(e+"-complete"),r.trigger("complete"),!o},function(t){r.form_post_unlock("progress",!0,!0),void 0!==t.error_message&&r.action_message(t.error_message),r.trigger(e+"-error"),r.trigger("error")},a>0)},t.WS_Form.prototype.form_post_lock=function(e,a,i){void 0===e&&(e="progress"),void 0===a&&(a=!1),void 0===i&&(i=!1),this.form_obj.hasClass("wsf-form-post-lock")||(a||this.get_object_meta_value(this.form,"submit_lock",!1))&&(i&&(this.form_ecommerce_calculate_enabled=!1),this.form_obj.addClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),t('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',this.form_canvas_obj).attr("disabled",""),this.form_post_locked=!0,this.trigger("lock"))},t.WS_Form.prototype.form_post_unlock=function(e,a,i){if(void 0===e&&(e="progress"),void 0===a&&(a=!0),void 0===i&&(i=!1),this.form_obj.hasClass("wsf-form-post-lock")){var r=this,o=function(){r.form_ecommerce_calculate_enabled=!0,r.form_obj.removeClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),t('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',r.form_canvas_obj).removeAttr("disabled"),r.form_post_locked=!1,r.api_call_progress_reset(),r.trigger("unlock")};(i||this.get_object_meta_value(this.form,"submit_unlock",!1))&&(a?setTimeout(function(){o()},1e3):o())}},t.WS_Form.prototype.api_call=function(e,a,i,r,o,s){void 0===a&&(a="POST"),i||(i=new FormData),void 0===s&&(s=!1);var _=this,n=s?ws_form_settings.url+e:"submit"==e?this.form_obj.attr("action"):ws_form_settings.url+e;if(!s&&this.form_action_custom&&("submit"==e||"save"==e))return this.form_obj.off("submit"),this.form_obj.submit(),!0;if(void 0!==i.get&&null!==i.get(ws_form_settings.wsf_nonce_field_name)||i.append(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),"GET"===a){for(var d={},c=i.entries(),h=c.next();!h.done;){var l=h.value;d[l[0]]=l[1],h=c.next()}i=d}var f={method:a,url:n,beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",ws_form_settings.x_wp_nonce)},contentType:!1,processData:"GET"===a,statusCode:{200:function(t){_.api_call_hash(t);var e="function"!=typeof r||r(t);void 0!==t.data&&e&&(void 0!==t.data.x_wp_nonce&&(ws_form_settings.x_wp_nonce=t.data.x_wp_nonce),"object"==typeof t.data.js&&_.action_js_init(t.data.js))},400:function(t){_.api_call_error_handler(t,400,n,o)},401:function(t){_.api_call_error_handler(t,401,n,o)},403:function(t){_.api_call_error_handler(t,403,n,o)},404:function(t){_.api_call_error_handler(t,404,n,o)},500:function(t){_.api_call_error_handler(t,500,n,o)}},complete:function(){this.api_call_handle=!1}};!1!==i&&(f.data=i);var m=t('[data-source="post_progress"]',this.form_canvas_obj);return m.length&&(f.xhr=function(){var t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",function(t){_.api_call_progress(m,t)},!1),t.addEventListener("progress",function(t){_.api_call_progress(m,t)},!1),t}),t.ajax(f)},t.WS_Form.prototype.api_call_error_handler=function(t,e,a,i){var r=void 0!==t.responseJSON&&t.responseJSON;r&&r.error&&r.error_message?this.error("error_api_call_"+e,r.error_message):this.error("error_api_call_"+e,a),"function"==typeof i&&i(r)},t.WS_Form.prototype.api_call_progress=function(e,a){if(a.lengthComputable){var i=this;e.each(function(){var e=a.loaded/a.total*100;i.form_progress_set_value(t(this),Math.round(e))})}},t.WS_Form.prototype.api_call_progress_reset=function(){var e=this;t('[data-progress-bar][data-source="post_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value(t(this),0)})},t.WS_Form.prototype.action_js_init=function(t){this.trigger("actions-start"),this.action_js=t,this.action_js_process_next()},t.WS_Form.prototype.action_js_process_next=function(){if(0==this.action_js.length)return this.trigger("actions-finish"),!1;var e=this.action_js.shift();switch(this.js_action_get_parameter(e,"action")){case"redirect":!1!==this.js_action_get_parameter(e,"url")&&(location.href=e.url);break;case"message":var a=this.js_action_get_parameter(e,"message"),i=this.js_action_get_parameter(e,"type"),r=this.js_action_get_parameter(e,"method"),o=this.js_action_get_parameter(e,"duration"),s=this.js_action_get_parameter(e,"form_hide"),_=this.js_action_get_parameter(e,"clear"),n=this.js_action_get_parameter(e,"scroll_top"),d=this.js_action_get_parameter(e,"scroll_top_offset"),c=this.js_action_get_parameter(e,"scroll_top_duration"),h=this.js_action_get_parameter(e,"form_show"),l=this.js_action_get_parameter(e,"message_hide");this.action_message(a,i,r,o,s,_,n,d,c,h,l);break;case"field_invalid_feedback":var f=this.js_action_get_parameter(e,"field_id"),m=this.js_action_get_parameter(e,"invalid_feedback"),p=t("#"+this.form_id_prefix+"field-"+f,this.form_canvas_obj),u=t("#"+this.form_id_prefix+"invalid-feedback-"+f,this.form_canvas_obj);this.set_invalid_feedback(p,u,m,f),process_bypass=!0;var v=this;p.one("change input keyup",function(){var e=t(this).closest("[data-id]").attr("data-id"),a=t("#"+v.form_id_prefix+"invalid-feedback-"+e,this.form_canvas_obj);v.set_invalid_feedback(t(this),a,"",e)});break;case"trigger":var b=this.js_action_get_parameter(e,"event"),g=this.js_action_get_parameter(e,"params");t(document).trigger(b,g);break;default:this.action_js_process_next()}},t.WS_Form.prototype.js_action_get_parameter=function(t,e){return void 0!==t[e]&&t[e]},t.WS_Form.prototype.get_framework_config_value=function(t,e){return void 0!==this.framework[t]&&(void 0!==this.framework[t].public&&(void 0!==this.framework[t].public[e]&&this.framework[t].public[e]))},t.WS_Form.prototype.action_message=function(e,a,i,r,o,s,_,n,d,c,h){void 0===a&&(a=this.get_object_meta_value(this.form,"error_type","danger")),void 0===i&&(i=this.get_object_meta_value(this.form,"error_method","after")),void 0===r&&(r=parseInt(this.get_object_meta_value(this.form,"error_duration","4000"))),void 0===o&&(o="on"==this.get_object_meta_value(this.form,"error_form_hide","")),void 0===s&&(s="on"==this.get_object_meta_value(this.form,"error_clear","")),void 0===_&&(_="on"==this.get_object_meta_value(this.form,"error_scroll_top","")),void 0===n&&(n=parseInt(this.get_object_meta_value(this.form,"error_scroll_top_offset","0"))),n=""==n?0:parseInt(n,10),void 0===d&&(d=parseInt(this.get_object_meta_value(this.form,"error_scroll_top_duration","400"))),void 0===c&&(c="on"==this.get_object_meta_value(this.form,"error_form_show","")),void 0===h&&(h="on"==this.get_object_meta_value(this.form,"error_message_hide","on"));var l=this.form_canvas_obj.offset().top-n;(r=parseInt(r,10))<0&&(r=0);var f=this.get_framework_config_value("message","mask_wrapper"),m=this.get_framework_config_value("message","types"),p=void 0!==(a=void 0!==m[a]&&m[a]).mask_wrapper_class?a.mask_wrapper_class:"";switch(s&&t('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),_){case"instant":case"on":t("html,body").scrollTop(l);break;case"smooth":d=""==d?0:parseInt(d,10),t("html,body").animate({scrollTop:l},d)}var u={message:e,mask_wrapper_class:p},v=t("<div/>",{html:this.mask_parse(f,u)});switch(v.attr("role","alert"),v.attr("data-wsf-message",""),v.attr("data-wsf-instance-id",this.form_instance_id),o&&this.form_obj.hide(),i){case"before":v.insertBefore(this.form_obj);break;case"after":v.insertAfter(this.form_obj)}var b=this;(r=parseInt(r,10))>0?setTimeout(function(){h&&v.remove(),c&&b.form_canvas_obj.show(),b.action_js_process_next()},r):b.action_js_process_next()},t.WS_Form.prototype.form_character_word_count=function(e){var a=this;for(var i in void 0===e&&(e=this.form_canvas_obj),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(i)){var r=this.field_data_cache[i],o=this.get_object_meta_value(r,"help","",!1,!0),s=-1!==o.indexOf("#character_")||-1!==o.indexOf("#word_");if(this.has_object_meta_key(r,"min_length")||this.has_object_meta_key(r,"max_length")||this.has_object_meta_key(r,"min_length_words")||this.has_object_meta_key(r,"max_length_words")||s){var _=t("#"+this.form_id_prefix+"field-"+i,e);_.length||(_=t('[id^="'+this.form_id_prefix+"field-"+i+'-"]:not([data-init-char-word-count]):not(iframe)',e)),_.each(function(){t(this).attr("data-init-char-word-count",""),a.form_character_word_count_process(t(this))&&t(this).on("keyup change focus blur paste",function(){a.form_character_word_count_process(t(this))})})}}},t.WS_Form.prototype.form_character_word_count_process=function(e){var a=e.closest("[data-type]"),i=a.attr("data-id"),r=v=a.attr("data-repeatable-index"),o=this.field_data_cache[i],s=this.get_object_meta_value(o,"min_length","");s=parseInt(s,10)>0&&parseInt(s,10);var _=this.get_object_meta_value(o,"max_length","");_=parseInt(_,10)>0&&parseInt(_,10);var n=this.get_object_meta_value(o,"min_length_words","");n=parseInt(n,10)>0&&parseInt(n,10);var d=this.get_object_meta_value(o,"max_length_words","");d=parseInt(d,10)>0&&parseInt(d,10);var c=e.val(),h=c.length,l=!1!==_&&_-h;l<0&&(l=0);var f=this.get_word_count(c),m=!1!==d&&d-f;m<0&&(m=0);var p=!1,u=[];!1!==s&&h<s&&(u.push(this.language("error_min_length",s)),p=!0),!1!==_&&h>_&&(u.push(this.language("error_max_length",_)),p=!0),!1!==n&&f<n&&(u.push(this.language("error_min_length_words",n)),p=!0),!1!==d&&f>d&&(u.push(this.language("error_max_length_words",d)),p=!0);r=void 0!==(v=a.attr("data-repeatable-index"))?"-repeat-"+v:"";var v,b=t("#"+this.form_id_prefix+"invalid-feedback-"+i+r,this.form_canvas_obj);(void 0!==e.attr("required")||c.length>0)&&p?this.set_invalid_feedback(e,b,u.join(" / "),i):this.set_invalid_feedback(e,b,"",i);var g=this.get_object_meta_value(o,"help","",!1,!0);if(-1===g.indexOf("#character_")&&-1===g.indexOf("#word_"))return!0;var w=this.language("character_singular"),y=this.language("character_plural"),k=this.language("word_singular"),j=this.language("word_plural"),x={character_count:h,character_count_label:1==h?w:y,character_remaining:!1!==l?l:"",character_remaining_label:1==l?w:y,character_min:!1!==s?s:"",character_min_label:!1!==s?1==s?w:y:"",character_max:!1!==_?_:"",character_max_label:!1!==_?1==_?w:y:"",word_count:f,word_count_label:1==f?k:j,word_remaining:!1!==m?m:"",word_remaining_label:1==m?k:j,word_min:!1!==n?n:"",word_min_label:!1!==n?1==n?k:j:"",word_max:!1!==d?d:"",word_max_label:!1!==d?1==d?k:j:""},S=this.mask_parse(g,x),F=this.form_id_prefix+"help-"+i+r;return t("#"+F,this.form_canvas_obj).html(S),!0},t.WS_Form.prototype.get_word_count=function(t){return 0==(t=t.trim()).length?0:t.trim().replace(/\s+/gi," ").split(" ").length},t.WS_Form.prototype.api_call_hash=function(t){var e=!0;return void 0===t.hash&&(e=!1),e&&32!=t.hash.length&&(e=!1),e&&this.hash_set(t.hash),e},t.WS_Form.prototype.hash_set=function(e,a,i){(void 0===a&&(a=!1),void 0===i&&(i=!1),e!=this.hash&&(this.hash=e,i=!0),a&&(this.token=a),i)&&(this.get_object_value(t.WS_Form.settings_plugin,"cookie_hash")&&this.cookie_set("hash",this.hash))},t.WS_Form.prototype.generate_password=function(t){for(var e="",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]\\:;?><,./-=",i=0;i<t;++i)e+=a.charAt(Math.floor(Math.random()*a.length));return e},t.WS_Form.prototype.form_stat=function(){ws_form_settings.stat&&this.form_stat_add_view()},t.WS_Form.prototype.form_stat_add_view=function(){t.ajax({method:"POST",url:ws_form_settings.add_view_url,data:{wsffid:this.form_id}})},window.wsf_form_instances=[],window.wsf_form_init=function(e){if(void 0===e&&(e=!1),t(".wsf-form").length){var a=0,i=[];t(".wsf-form").each(function(){if(void 0!==t(this).attr("data-instance-id")){var e=parseInt(t(this).attr("data-instance-id"));-1!==i.indexOf(e)?t(this).removeAttr("data-instance-id"):e>a&&(a=e),i.push(e)}}),a++,t(".wsf-form").each(function(){if(e||""===t(this).html()){void 0===t(this).attr("data-instance-id")&&(void 0===t(this).attr("data-wsf-custom-id")&&t(this).attr("id","ws-form-"+a),t(this).attr("data-instance-id",a),a++);var i=t(this).attr("id"),r=t(this).attr("data-id"),o=t(this).attr("data-instance-id");if(i&&r&&o){var s=new t.WS_Form;window.wsf_form_instances[o]=s,s.render({obj:"#"+i,form_id:r})}}})}},t(function(){wsf_form_init()})}(jQuery);